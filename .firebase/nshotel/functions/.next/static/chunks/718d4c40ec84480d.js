(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88653,e=>{"use strict";e.i(47167);var t=e.i(43476),s=e.i(71645),l=e.i(31178),r=e.i(47414),n=e.i(74008),a=e.i(21476),o=e.i(72846),i=s,c=e.i(37806);function d(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class u extends i.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,s=(0,o.isHTMLElement)(e)&&e.offsetWidth||0,l=this.props.sizeRef.current;l.height=t.offsetHeight||0,l.width=t.offsetWidth||0,l.top=t.offsetTop,l.left=t.offsetLeft,l.right=s-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function h({children:e,isPresent:l,anchorX:r,root:n}){let a=(0,i.useId)(),o=(0,i.useRef)(null),h=(0,i.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:x}=(0,i.useContext)(c.MotionConfigContext),m=function(...e){return s.useCallback(function(...e){return t=>{let s=!1,l=e.map(e=>{let l=d(e,t);return s||"function"!=typeof l||(s=!0),l});if(s)return()=>{for(let t=0;t<l.length;t++){let s=l[t];"function"==typeof s?s():d(e[t],null)}}}}(...e),e)}(o,e.props?.ref??e?.ref);return(0,i.useInsertionEffect)(()=>{let{width:e,height:t,top:s,left:i,right:c}=h.current;if(l||!o.current||!e||!t)return;let d="left"===r?`left: ${i}`:`right: ${c}`;o.current.dataset.motionPopId=a;let u=document.createElement("style");x&&(u.nonce=x);let m=n??document.head;return m.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${d}px !important;
            top: ${s}px !important;
          }
        `),()=>{m.contains(u)&&m.removeChild(u)}},[l]),(0,t.jsx)(u,{isPresent:l,childRef:o,sizeRef:h,children:i.cloneElement(e,{ref:m})})}let x=({children:e,initial:l,isPresent:n,onExitComplete:o,custom:i,presenceAffectsLayout:c,mode:d,anchorX:u,root:x})=>{let f=(0,r.useConstant)(m),p=(0,s.useId)(),g=!0,y=(0,s.useMemo)(()=>(g=!1,{id:p,initial:l,isPresent:n,custom:i,onExitComplete:e=>{for(let t of(f.set(e,!0),f.values()))if(!t)return;o&&o()},register:e=>(f.set(e,!1),()=>f.delete(e))}),[n,f,o]);return c&&g&&(y={...y}),(0,s.useMemo)(()=>{f.forEach((e,t)=>f.set(t,!1))},[n]),s.useEffect(()=>{n||f.size||!o||o()},[n]),"popLayout"===d&&(e=(0,t.jsx)(h,{isPresent:n,anchorX:u,root:x,children:e})),(0,t.jsx)(a.PresenceContext.Provider,{value:y,children:e})};function m(){return new Map}var f=e.i(64978);let p=e=>e.key||"";function g(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}let y=({children:e,custom:a,initial:o=!0,onExitComplete:i,presenceAffectsLayout:c=!0,mode:d="sync",propagate:u=!1,anchorX:h="left",root:m})=>{let[y,w]=(0,f.usePresence)(u),b=(0,s.useMemo)(()=>g(e),[e]),j=u&&!y?[]:b.map(p),v=(0,s.useRef)(!0),N=(0,s.useRef)(b),C=(0,r.useConstant)(()=>new Map),k=(0,s.useRef)(new Set),[E,R]=(0,s.useState)(b),[P,S]=(0,s.useState)(b);(0,n.useIsomorphicLayoutEffect)(()=>{v.current=!1,N.current=b;for(let e=0;e<P.length;e++){let t=p(P[e]);j.includes(t)?(C.delete(t),k.current.delete(t)):!0!==C.get(t)&&C.set(t,!1)}},[P,j.length,j.join("-")]);let M=[];if(b!==E){let e=[...b];for(let t=0;t<P.length;t++){let s=P[t],l=p(s);j.includes(l)||(e.splice(t,0,s),M.push(s))}return"wait"===d&&M.length&&(e=M),S(g(e)),R(b),null}let{forceRender:A}=(0,s.useContext)(l.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:P.map(e=>{let s=p(e),l=(!u||!!y)&&(b===P||j.includes(s));return(0,t.jsx)(x,{isPresent:l,initial:(!v.current||!!o)&&void 0,custom:a,presenceAffectsLayout:c,mode:d,root:m,onExitComplete:l?void 0:()=>{if(k.current.has(s)||(k.current.add(s),!C.has(s)))return;C.set(s,!0);let e=!0;C.forEach(t=>{t||(e=!1)}),e&&(A?.(),S(N.current),u&&w?.(),i&&i())},anchorX:h,children:e},s)})})};e.s(["AnimatePresence",()=>y],88653)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],40160)},70756,63209,e=>{"use strict";var t=e.i(75254);let s=(0,t.default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>s],70756);let l=(0,t.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>l],63209)},61210,e=>{"use strict";var t=e.i(43476),s=e.i(71645),l=e.i(70756),r=e.i(94918),n=e.i(40160);let a=(0,e.i(75254).default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var o=e.i(63209),i=e.i(46932),c=e.i(88653);function d(){let[e,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)(""),[x,m]=(0,s.useState)(""),[f,p]=(0,s.useState)(new Date().getMonth()+1),[g,y]=(0,s.useState)(new Date().getFullYear()),[w,b]=(0,s.useState)(!1),j=async()=>{b(!0);try{let e=await fetch("/api/export/monthly-report",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({month:f,year:g})});if(e.ok){let t=await e.blob(),s=window.URL.createObjectURL(t),l=document.createElement("a");l.href=s,l.download=`Monthly_Report_${f}_${g}.xlsx`,document.body.appendChild(l),l.click(),l.remove()}else alert("Failed to download report")}catch(e){console.error(e),alert("Error downloading file")}finally{b(!1)}};return(0,t.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[80vh] w-full max-w-2xl mx-auto p-4",children:(0,t.jsx)(c.AnimatePresence,{mode:"wait",children:e?(0,t.jsxs)(i.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white p-8 rounded-2xl shadow-xl border border-slate-100 w-full text-center space-y-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-3 text-green-600 mb-4",children:[(0,t.jsx)(a,{className:"w-6 h-6"}),(0,t.jsx)("span",{className:"font-medium text-sm",children:"Authenticated Owner Access"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"inline-block p-4 bg-green-50 rounded-2xl mb-4",children:(0,t.jsx)(r.FileSpreadsheet,{className:"w-12 h-12 text-green-600"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"Export Monthly Records"}),(0,t.jsx)("p",{className:"text-slate-500 mt-2 max-w-md mx-auto",children:"Download a read-only Excel sheet containing all check-in/out data, revenue, and guest details for the selected month."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 max-w-sm mx-auto",children:[(0,t.jsxs)("div",{className:"space-y-2 text-left",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Month"}),(0,t.jsx)("select",{value:f,onChange:e=>p(Number(e.target.value)),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg",children:Array.from({length:12},(e,t)=>t+1).map(e=>(0,t.jsx)("option",{value:e,children:new Date(0,e-1).toLocaleString("default",{month:"long"})},e))})]}),(0,t.jsxs)("div",{className:"space-y-2 text-left",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Year"}),(0,t.jsx)("select",{value:g,onChange:e=>y(Number(e.target.value)),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg",children:[2024,2025,2026].map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]})]}),(0,t.jsx)("button",{onClick:j,disabled:w,className:"w-full max-w-sm mx-auto py-4 bg-green-600 hover:bg-green-700 disabled:bg-slate-300 disabled:cursor-not-allowed text-white font-bold rounded-xl shadow-lg shadow-green-600/20 flex items-center justify-center gap-2 transition-all active:scale-95",children:w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Generating File..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Download,{className:"w-5 h-5"}),"Download Excel Report"]})})]},"dashboard"):(0,t.jsxs)(i.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white p-8 rounded-2xl shadow-xl border border-slate-200 w-full max-w-md text-center space-y-6",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto",children:(0,t.jsx)(l.Lock,{className:"w-8 h-8 text-slate-700"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-800",children:"Restricted Access"}),(0,t.jsx)("p",{className:"text-slate-500 text-sm mt-2",children:"Enter Owner Password to access financial reports."})]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),"admin"===u?(d(!0),m("")):(m("Incorrect Access Key"),h(""))},className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-left space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Access Key"}),(0,t.jsx)("input",{type:"password",value:u,onChange:e=>h(e.target.value),className:"w-full p-3 border border-slate-300 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 text-center text-lg tracking-widest font-mono",placeholder:"••••••",autoFocus:!0}),x&&(0,t.jsxs)("p",{className:"text-red-500 text-xs flex items-center gap-1 justify-center",children:[(0,t.jsx)(o.AlertCircle,{className:"w-3 h-3"})," ",x]})]}),(0,t.jsx)("button",{type:"submit",className:"w-full py-3 bg-slate-900 hover:bg-slate-800 text-white font-bold rounded-lg transition-all",children:"Unlock Dashboard"})]})]},"login")})})}e.s(["default",()=>d],61210)}]);