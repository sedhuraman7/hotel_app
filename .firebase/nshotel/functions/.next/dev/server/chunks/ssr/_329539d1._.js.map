{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/hotal_project/web_app/components/CheckInModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { X, User, Users, CreditCard, Calendar, DoorClosed, Key, Save } from \"lucide-react\";\r\n\r\ntype CheckInModalProps = {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onSubmit: (data: any) => void;\r\n    initialData?: any;\r\n};\r\n\r\nexport default function CheckInModal({ isOpen, onClose, onSubmit, initialData }: CheckInModalProps) {\r\n    const [rooms, setRooms] = useState<any[]>([]);\r\n\r\n    const defaultData = {\r\n        // Guest Details\r\n        guestName: \"\",\r\n        adults: 1,\r\n        children: 0,\r\n        rfid: \"\",\r\n        phone: \"\", // Added phone field\r\n\r\n        // Room Details\r\n        roomNumber: \"\", // Room ID\r\n        roomType: \"\",\r\n        rate: 0,\r\n\r\n        // Payment Details\r\n        roomTariff: 0,\r\n        taxAmount: 0,\r\n        totalAmount: 0,\r\n        stayLength: 1,\r\n        checkInTime: \"\",\r\n        paymentStatus: \"Unpaid\",\r\n        status: \"Checked In\"\r\n    };\r\n\r\n    const [formData, setFormData] = useState(defaultData);\r\n\r\n    // Fetch rooms when modal opens\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            fetch(\"/api/rooms\")\r\n                .then(res => res.json())\r\n                .then(data => setRooms(data))\r\n                .catch(err => console.error(\"Failed to fetch rooms\", err));\r\n\r\n            if (initialData) {\r\n                setFormData({\r\n                    ...defaultData,\r\n                    ...initialData,\r\n                    checkInTime: initialData.checkInTime ? initialData.checkInTime.replace(\" \", \"T\").slice(0, 16) : \"\",\r\n                    stayLength: parseInt(initialData.stayLength) || 1\r\n                });\r\n            } else {\r\n                const now = new Date();\r\n                now.setMinutes(now.getMinutes() - now.getTimezoneOffset());\r\n                setFormData({\r\n                    ...defaultData,\r\n                    checkInTime: now.toISOString().slice(0, 16)\r\n                });\r\n            }\r\n        }\r\n    }, [isOpen, initialData]);\r\n\r\n    // Update Room Type when Room Number changes\r\n    useEffect(() => {\r\n        if (formData.roomNumber) {\r\n            const selectedRoom = rooms.find(r => r.id === formData.roomNumber);\r\n            if (selectedRoom) {\r\n                setFormData(prev => ({ ...prev, roomType: selectedRoom.type }));\r\n            }\r\n        }\r\n    }, [formData.roomNumber, rooms]);\r\n\r\n    // Auto-calculate Total\r\n    useEffect(() => {\r\n        const tariff = Number(formData.roomTariff) || 0;\r\n        const tax = Number(formData.taxAmount) || 0;\r\n        setFormData(prev => ({ ...prev, totalAmount: tariff + tax }));\r\n    }, [formData.roomTariff, formData.taxAmount]);\r\n\r\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        onSubmit(formData);\r\n    };\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-6\">\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        onClick={onClose}\r\n                        className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\"\r\n                    />\r\n\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                        exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        className=\"relative bg-white w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-2xl shadow-2xl flex flex-col\"\r\n                    >\r\n                        {/* Header */}\r\n                        <div className=\"sticky top-0 bg-white z-10 border-b border-slate-100 px-6 py-4 flex items-center justify-between\">\r\n                            <div>\r\n                                <h2 className=\"text-xl font-bold text-slate-800\">New Concierge Check-In</h2>\r\n                                <p className=\"text-sm text-slate-500\">Enter guest details to create a new record</p>\r\n                            </div>\r\n                            <button onClick={onClose} className=\"p-2 hover:bg-slate-100 rounded-full transition-colors\">\r\n                                <X className=\"w-6 h-6 text-slate-500\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        <form onSubmit={handleSubmit} className=\"p-6 space-y-8\">\r\n                            {/* Guest Details */}\r\n                            <section>\r\n                                <h3 className=\"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2\">\r\n                                    <User className=\"w-5 h-5 text-blue-500\" /> Guest Details\r\n                                </h3>\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                    <div className=\"space-y-1.5\">\r\n                                        <label className=\"text-xs font-semibold text-slate-600 uppercase\">Guest Name *</label>\r\n                                        <input name=\"guestName\" required value={formData.guestName} onChange={handleChange} className=\"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none\" placeholder=\"John Doe\" />\r\n                                    </div>\r\n                                    <div className=\"space-y-1.5\">\r\n                                        <label className=\"text-xs font-semibold text-slate-600 uppercase\">Phone</label>\r\n                                        <input name=\"phone\" value={formData.phone} onChange={handleChange} className=\"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none\" placeholder=\"+91 9876543210\" />\r\n                                    </div>\r\n                                    <div className=\"space-y-1.5\">\r\n                                        <label className=\"text-xs font-semibold text-slate-600 uppercase\">RF ID</label>\r\n                                        <div className=\"relative\">\r\n                                            <Key className=\"absolute left-3 top-3 w-5 h-5 text-slate-400\" />\r\n                                            <input name=\"rfid\" value={formData.rfid} onChange={handleChange} className=\"w-full pl-10 p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none\" placeholder=\"Scan Card...\" />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"grid grid-cols-2 gap-4\">\r\n                                        <div className=\"space-y-1.5\">\r\n                                            <label className=\"text-xs font-semibold text-slate-600 uppercase\">Adults *</label>\r\n                                            <input type=\"number\" name=\"adults\" min={1} required value={formData.adults} onChange={handleChange} className=\"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none\" />\r\n                                        </div>\r\n                                        <div className=\"space-y-1.5\">\r\n                                            <label className=\"text-xs font-semibold text-slate-600 uppercase\">Children</label>\r\n                                            <input type=\"number\" name=\"children\" min={0} value={formData.children} onChange={handleChange} className=\"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none\" />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </section>\r\n\r\n                            {/* Room Details */}\r\n                            <section>\r\n                                <div className=\"h-px bg-slate-100 mb-6\" />\r\n                                <h3 className=\"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2\">\r\n                                    <DoorClosed className=\"w-5 h-5 text-purple-500\" /> Room Details\r\n                                </h3>\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                                    <div className=\"space-y-1.5\">\r\n                                        <label className=\"text-xs font-semibold text-slate-600 uppercase\">Room Number *</label>\r\n                                        <select name=\"roomNumber\" required value={formData.roomNumber} onChange={handleChange} className=\"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none appearance-none cursor-pointer\">\r\n                                            <option value=\"\">- Select -</option>\r\n                                            {rooms.map(room => (\r\n                                                <option key={room.id} value={room.id} disabled={room.status !== \"Vacant\"}>\r\n                                                    Room {room.id} ({room.status})\r\n                                                </option>\r\n                                            ))}\r\n                                        </select>\r\n                                    </div>\r\n                                    <div className=\"space-y-1.5\">\r\n                                        <label className=\"text-xs font-semibold text-slate-600 uppercase\">Room Type</label>\r\n                                        <input name=\"roomType\" readOnly value={formData.roomType} className=\"w-full p-3 bg-slate-100 border border-slate-200 rounded-xl text-slate-500\" />\r\n                                    </div>\r\n                                    <div className=\"space-y-1.5\">\r\n                                        <label className=\"text-xs font-semibold text-slate-600 uppercase\">Rate</label>\r\n                                        <input type=\"number\" name=\"rate\" required value={formData.rate} onChange={handleChange} className=\"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none\" />\r\n                                    </div>\r\n                                </div>\r\n                            </section>\r\n\r\n                            {/* Payment Details */}\r\n                            <section>\r\n                                <div className=\"h-px bg-slate-100 mb-6\" />\r\n                                <h3 className=\"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2\">\r\n                                    <CreditCard className=\"w-5 h-5 text-green-500\" /> Payment & Stay\r\n                                </h3>\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                                    <div className=\"space-y-1.5\">\r\n                                        <label className=\"text-xs font-semibold text-slate-600 uppercase\">Room Tariff *</label>\r\n                                        <input type=\"number\" name=\"roomTariff\" required value={formData.roomTariff} onChange={handleChange} className=\"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none\" />\r\n                                    </div>\r\n                                    <div className=\"space-y-1.5\">\r\n                                        <label className=\"text-xs font-semibold text-slate-600 uppercase\">Tax Amount *</label>\r\n                                        <input type=\"number\" name=\"taxAmount\" required value={formData.taxAmount} onChange={handleChange} className=\"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none\" />\r\n                                    </div>\r\n                                    <div className=\"space-y-1.5\">\r\n                                        <label className=\"text-xs font-semibold text-slate-600 uppercase\">Total Amount</label>\r\n                                        <input type=\"number\" name=\"totalAmount\" readOnly value={formData.totalAmount} className=\"w-full p-3 bg-slate-100 border border-slate-200 rounded-xl text-slate-500 cursor-not-allowed\" />\r\n                                    </div>\r\n                                    <div className=\"space-y-1.5\">\r\n                                        <label className=\"text-xs font-semibold text-slate-600 uppercase\">Stay Length (Days) *</label>\r\n                                        <input type=\"number\" name=\"stayLength\" min={1} required value={formData.stayLength} onChange={handleChange} className=\"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none\" />\r\n                                    </div>\r\n                                    <div className=\"space-y-1.5\">\r\n                                        <label className=\"text-xs font-semibold text-slate-600 uppercase\">Check In Time *</label>\r\n                                        <input type=\"datetime-local\" name=\"checkInTime\" required value={formData.checkInTime} onChange={handleChange} className=\"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none\" />\r\n                                    </div>\r\n                                    <div className=\"space-y-1.5\">\r\n                                        <label className=\"text-xs font-semibold text-slate-600 uppercase\">Payment Status *</label>\r\n                                        <select name=\"paymentStatus\" required value={formData.paymentStatus} onChange={handleChange} className=\"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none appearance-none cursor-pointer\">\r\n                                            <option value=\"Paid\">Paid</option>\r\n                                            <option value=\"Unpaid\">Unpaid</option>\r\n                                            <option value=\"Partial\">Partial</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            </section>\r\n\r\n                            {/* Footer */}\r\n                            <div className=\"sticky bottom-0 bg-white border-t border-slate-100 pt-4 pb-0 flex items-center justify-end gap-3\">\r\n                                <button type=\"button\" onClick={onClose} className=\"px-6 py-2.5 rounded-xl border border-slate-200 text-slate-600 font-medium hover:bg-slate-50 transition-colors\">\r\n                                    Cancel\r\n                                </button>\r\n                                <button type=\"submit\" className=\"px-6 py-2.5 rounded-xl bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-500/30 flex items-center gap-2\">\r\n                                    <Save className=\"w-5 h-5\" />\r\n                                    Save Record\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </motion.div>\r\n                </div>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 857, "column": 0}, "map": {"version":3,"sources":["file:///D:/hotal_project/web_app/components/TransferModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { X, ArrowRightLeft, DoorClosed, Save } from \"lucide-react\";\r\n\r\ntype TransferModalProps = {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    guestName: string;\r\n    currentRoom: string;\r\n    onTransfer: (newRoom: string) => void;\r\n};\r\n\r\nexport default function TransferModal({ isOpen, onClose, guestName, currentRoom, onTransfer }: TransferModalProps) {\r\n    const [newRoom, setNewRoom] = useState(\"\");\r\n\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (newRoom && newRoom !== currentRoom) {\r\n            onTransfer(newRoom);\r\n            onClose();\r\n            setNewRoom(\"\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <div className=\"fixed inset-0 z-[105] flex items-center justify-center p-4\">\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}\r\n                        onClick={onClose} className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\"\r\n                    />\r\n                    <motion.div\r\n                        initial={{ scale: 0.95, opacity: 0 }} animate={{ scale: 1, opacity: 1 }} exit={{ scale: 0.95, opacity: 0 }}\r\n                        className=\"relative bg-white w-full max-w-md rounded-2xl shadow-xl overflow-hidden\"\r\n                    >\r\n                        <div className=\"bg-slate-50 border-b border-slate-100 p-4 flex justify-between items-center\">\r\n                            <h3 className=\"font-bold text-slate-800 flex items-center gap-2\">\r\n                                <ArrowRightLeft className=\"w-5 h-5 text-blue-600\" /> Transfer Room\r\n                            </h3>\r\n                            <button onClick={onClose}><X className=\"w-5 h-5 text-slate-400 hover:text-slate-600\" /></button>\r\n                        </div>\r\n\r\n                        <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\r\n                            <div className=\"bg-blue-50 p-4 rounded-xl space-y-2\">\r\n                                <p className=\"text-sm text-blue-600 font-semibold\">Current Booking</p>\r\n                                <div className=\"flex justify-between items-center\">\r\n                                    <span className=\"text-slate-700 font-medium\">{guestName}</span>\r\n                                    <span className=\"bg-white px-2 py-1 rounded text-xs font-bold text-slate-600 border border-blue-100\">Room {currentRoom}</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-xs font-bold uppercase text-slate-500\">Select New Room</label>\r\n                                <div className=\"relative\">\r\n                                    <DoorClosed className=\"absolute left-3 top-3 w-5 h-5 text-slate-400\" />\r\n                                    <select\r\n                                        required\r\n                                        value={newRoom}\r\n                                        onChange={(e) => setNewRoom(e.target.value)}\r\n                                        className=\"w-full pl-10 p-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 appearance-none\"\r\n                                    >\r\n                                        <option value=\"\">-- Select Available Room --</option>\r\n                                        <option value=\"101\" disabled={currentRoom === \"101\"}>101 {currentRoom === \"101\" && \"(Current)\"}</option>\r\n                                        <option value=\"102\" disabled={currentRoom === \"102\"}>102 {currentRoom === \"102\" && \"(Current)\"}</option>\r\n                                        <option value=\"201\" disabled={currentRoom === \"201\"}>201 {currentRoom === \"201\" && \"(Current)\"}</option>\r\n                                        <option value=\"202\" disabled={currentRoom === \"202\"}>202 {currentRoom === \"202\" && \"(Current)\"}</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"pt-2 flex justify-end gap-2\">\r\n                                <button type=\"button\" onClick={onClose} className=\"px-4 py-2 rounded-lg text-slate-600 hover:bg-slate-50 font-medium text-sm\">Cancel</button>\r\n                                <button type=\"submit\" className=\"px-4 py-2 rounded-lg bg-blue-600 text-white font-medium text-sm hover:bg-blue-700 shadow-lg shadow-blue-500/20\">Transfer Now</button>\r\n                            </div>\r\n                        </form>\r\n                    </motion.div>\r\n                </div>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AAAA;AAAA;AAJA;;;;;AAce,SAAS,cAAc,EAAE,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,WAAW,EAAE,UAAU,EAAsB;IAC7G,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,MAAM,eAAe,CAAC;QAClB,EAAE,cAAc;QAChB,IAAI,WAAW,YAAY,aAAa;YACpC,WAAW;YACX;YACA,WAAW;QACf;IACJ;IAEA,qBACI,8OAAC,4MAAe;kBACX,wBACG,8OAAC;YAAI,WAAU;;8BACX,8OAAC,oMAAM,CAAC,GAAG;oBACP,SAAS;wBAAE,SAAS;oBAAE;oBAAG,SAAS;wBAAE,SAAS;oBAAE;oBAAG,MAAM;wBAAE,SAAS;oBAAE;oBACrE,SAAS;oBAAS,WAAU;;;;;;8BAEhC,8OAAC,oMAAM,CAAC,GAAG;oBACP,SAAS;wBAAE,OAAO;wBAAM,SAAS;oBAAE;oBAAG,SAAS;wBAAE,OAAO;wBAAG,SAAS;oBAAE;oBAAG,MAAM;wBAAE,OAAO;wBAAM,SAAS;oBAAE;oBACzG,WAAU;;sCAEV,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAG,WAAU;;sDACV,8OAAC,gPAAc;4CAAC,WAAU;;;;;;wCAA0B;;;;;;;8CAExD,8OAAC;oCAAO,SAAS;8CAAS,cAAA,8OAAC,iMAAC;wCAAC,WAAU;;;;;;;;;;;;;;;;;sCAG3C,8OAAC;4BAAK,UAAU;4BAAc,WAAU;;8CACpC,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAE,WAAU;sDAAsC;;;;;;sDACnD,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDAAK,WAAU;8DAA8B;;;;;;8DAC9C,8OAAC;oDAAK,WAAU;;wDAAqF;wDAAM;;;;;;;;;;;;;;;;;;;8CAInH,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAM,WAAU;sDAA6C;;;;;;sDAC9D,8OAAC;4CAAI,WAAU;;8DACX,8OAAC,gOAAU;oDAAC,WAAU;;;;;;8DACtB,8OAAC;oDACG,QAAQ;oDACR,OAAO;oDACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;oDAC1C,WAAU;;sEAEV,8OAAC;4DAAO,OAAM;sEAAG;;;;;;sEACjB,8OAAC;4DAAO,OAAM;4DAAM,UAAU,gBAAgB;;gEAAO;gEAAK,gBAAgB,SAAS;;;;;;;sEACnF,8OAAC;4DAAO,OAAM;4DAAM,UAAU,gBAAgB;;gEAAO;gEAAK,gBAAgB,SAAS;;;;;;;sEACnF,8OAAC;4DAAO,OAAM;4DAAM,UAAU,gBAAgB;;gEAAO;gEAAK,gBAAgB,SAAS;;;;;;;sEACnF,8OAAC;4DAAO,OAAM;4DAAM,UAAU,gBAAgB;;gEAAO;gEAAK,gBAAgB,SAAS;;;;;;;;;;;;;;;;;;;;;;;;;8CAK/F,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAO,MAAK;4CAAS,SAAS;4CAAS,WAAU;sDAA4E;;;;;;sDAC9H,8OAAC;4CAAO,MAAK;4CAAS,WAAU;sDAAiH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQjL"}},
    {"offset": {"line": 1165, "column": 0}, "map": {"version":3,"sources":["file:///D:/hotal_project/web_app/components/InvoiceModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { X, FileText, Printer, Download, CreditCard } from \"lucide-react\";\r\n\r\ntype InvoiceModalProps = {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    record: any;\r\n};\r\n\r\nexport default function InvoiceModal({ isOpen, onClose, record }: InvoiceModalProps) {\r\n    if (!record) return null;\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <div className=\"fixed inset-0 z-[105] flex items-center justify-center p-4\">\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}\r\n                        onClick={onClose} className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\"\r\n                    />\r\n                    <motion.div\r\n                        initial={{ scale: 0.95, opacity: 0 }} animate={{ scale: 1, opacity: 1 }} exit={{ scale: 0.95, opacity: 0 }}\r\n                        className=\"relative bg-white w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]\"\r\n                    >\r\n                        <div className=\"bg-slate-900 text-white p-6 flex justify-between items-start\">\r\n                            <div>\r\n                                <h3 className=\"text-xl font-bold flex items-center gap-2\">\r\n                                    <FileText className=\"w-5 h-5 text-blue-400\" /> Invoice\r\n                                </h3>\r\n                                <p className=\"text-slate-400 text-sm mt-1\">#INV-{Date.now().toString().slice(-6)}</p>\r\n                            </div>\r\n                            <button onClick={onClose} className=\"bg-white/10 p-2 rounded-full hover:bg-white/20 transition-colors\"><X className=\"w-5 h-5\" /></button>\r\n                        </div>\r\n\r\n                        <div className=\"p-8 space-y-6 overflow-y-auto\">\r\n                            {/* Hotel Info */}\r\n                            <div className=\"text-center border-b border-slate-100 pb-6\">\r\n                                <h2 className=\"text-2xl font-bold text-slate-800\">Luxe Ocean Hotel</h2>\r\n                                <p className=\"text-slate-500 text-sm\">123 Beach Road, Chennai</p>\r\n                            </div>\r\n\r\n                            {/* Guest Details */}\r\n                            <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n                                <div>\r\n                                    <p className=\"text-slate-400 uppercase text-xs font-bold mb-1\">Guest Name</p>\r\n                                    <p className=\"font-semibold text-slate-800\">{record.guestName}</p>\r\n                                </div>\r\n                                <div className=\"text-right\">\r\n                                    <p className=\"text-slate-400 uppercase text-xs font-bold mb-1\">Room No.</p>\r\n                                    <p className=\"font-semibold text-slate-800 text-lg\">{record.roomNumber}</p>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-slate-400 uppercase text-xs font-bold mb-1\">Check In</p>\r\n                                    <p className=\"font-medium text-slate-700\">{record.checkInTime}</p>\r\n                                </div>\r\n                                <div className=\"text-right\">\r\n                                    <p className=\"text-slate-400 uppercase text-xs font-bold mb-1\">Stay Duration</p>\r\n                                    <p className=\"font-medium text-slate-700\">{record.stayLength}</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Bill Tables */}\r\n                            <div className=\"bg-slate-50 rounded-xl p-4\">\r\n                                <div className=\"flex justify-between mb-2 text-sm\">\r\n                                    <span className=\"text-slate-600\">Room Charges</span>\r\n                                    <span className=\"font-medium\">₹{Number(record.totalAmount) * 0.9}</span>\r\n                                </div>\r\n                                <div className=\"flex justify-between mb-2 text-sm\">\r\n                                    <span className=\"text-slate-600\">Taxes (10%)</span>\r\n                                    <span className=\"font-medium\">₹{Number(record.totalAmount) * 0.1}</span>\r\n                                </div>\r\n                                <div className=\"border-t border-slate-200 my-2 pt-2 flex justify-between items-center\">\r\n                                    <span className=\"font-bold text-slate-800\">Total Amount</span>\r\n                                    <span className=\"font-bold text-blue-600 text-lg\">₹{record.totalAmount}</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Status */}\r\n                            <div className=\"flex justify-center\">\r\n                                <span className={`px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wide border ${record.status === 'Checked In'\r\n                                        ? 'bg-green-50 text-green-600 border-green-200'\r\n                                        : 'bg-red-50 text-red-600 border-red-200'\r\n                                    }`}>\r\n                                    Status: {record.status}\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"p-4 border-t border-slate-100 flex gap-3 bg-slate-50\">\r\n                            <button className=\"flex-1 py-3 bg-white border border-slate-200 text-slate-700 rounded-xl font-semibold text-sm hover:bg-slate-100 flex items-center justify-center gap-2 transition-colors\">\r\n                                <Printer className=\"w-4 h-4\" /> Print\r\n                            </button>\r\n                            <button className=\"flex-1 py-3 bg-blue-600 text-white rounded-xl font-semibold text-sm hover:bg-blue-700 flex items-center justify-center gap-2 shadow-lg shadow-blue-500/30 transition-colors\">\r\n                                <Download className=\"w-4 h-4\" /> Download PDF\r\n                            </button>\r\n                        </div>\r\n                    </motion.div>\r\n                </div>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1595, "column": 0}, "map": {"version":3,"sources":["file:///D:/hotal_project/web_app/app/dashboard/records/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport Link from \"next/link\";\r\nimport { ArrowLeft, Plus, Edit, FileText, ArrowRightLeft, History } from \"lucide-react\";\r\nimport CheckInModal from \"@/components/CheckInModal\";\r\nimport TransferModal from \"@/components/TransferModal\";\r\nimport InvoiceModal from \"@/components/InvoiceModal\";\r\n\r\n// Initial State\r\nconst initialRecords: any[] = [];\r\n\r\nexport default function RoomRecordsPage() {\r\n    const [records, setRecords] = useState<any[]>([]);\r\n    const [selectedRecord, setSelectedRecord] = useState<any>(null);\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // Action Modals State\r\n    const [isTransferOpen, setIsTransferOpen] = useState(false);\r\n    const [isInvoiceOpen, setIsInvoiceOpen] = useState(false);\r\n    const [actionRecord, setActionRecord] = useState<any>(null);\r\n\r\n    const fetchRecords = async () => {\r\n        try {\r\n            const res = await fetch(\"/api/guests\");\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                // Map API data to UI structure\r\n                const formatted = data.map((guest: any) => ({\r\n                    id: guest.id,\r\n                    guestName: guest.name,\r\n                    roomNumber: guest.room?.id || \"N/A\", // Assume room relation is included\r\n                    checkInTime: new Date(guest.checkInTime).toLocaleString(),\r\n                    checkOutDate: guest.checkOutTime ? new Date(guest.checkOutTime).toLocaleString() : \"-\",\r\n                    stayLength: guest.stayLength + \" days\",\r\n                    totalAmount: guest.totalAmount,\r\n                    status: guest.status\r\n                }));\r\n                setRecords(formatted);\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchRecords();\r\n    }, []);\r\n\r\n    const handleAddRecord = async (data: any) => {\r\n        const payload = {\r\n            name: data.guestName,\r\n            roomId: data.roomNumber,\r\n            cardId: data.rfid || null,\r\n            phone: data.phone,\r\n            paymentStatus: data.paymentStatus,\r\n            totalAmount: data.totalAmount\r\n        };\r\n\r\n        const res = await fetch(\"/api/guests\", {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify(payload)\r\n        });\r\n\r\n        if (res.ok) {\r\n            fetchRecords();\r\n            setIsModalOpen(false);\r\n        } else {\r\n            const err = await res.json();\r\n            alert(`Check-in Failed: ${err.error}`);\r\n        }\r\n    };\r\n\r\n    const handleEdit = (record: any) => {\r\n        setSelectedRecord(record);\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const openTransfer = (record: any) => {\r\n        setActionRecord(record);\r\n        setIsTransferOpen(true);\r\n    };\r\n\r\n    const openInvoice = (record: any) => {\r\n        setActionRecord(record);\r\n        setIsInvoiceOpen(true);\r\n    };\r\n\r\n    const handleTransferSubmit = (newRoom: string) => {\r\n        if (actionRecord) {\r\n            setRecords(records.map(rec => rec.id === actionRecord.id ? { ...rec, roomNumber: newRoom } : rec));\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-slate-800\">Active Check Ins</h1>\r\n                    <p className=\"text-slate-500 text-sm\">Manage guest check-ins and history</p>\r\n                </div>\r\n                <div className=\"flex items-center gap-3\">\r\n                    <Link\r\n                        href=\"/dashboard\"\r\n                        className=\"px-4 py-2 border border-slate-200 rounded-lg text-slate-600 hover:bg-slate-50 text-sm font-medium transition-colors\"\r\n                    >\r\n                        Back\r\n                    </Link>\r\n                    <button\r\n                        onClick={() => { setSelectedRecord(null); setIsModalOpen(true); }}\r\n                        className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-colors shadow-lg shadow-blue-500/30\"\r\n                    >\r\n                        <Plus className=\"w-4 h-4\" />\r\n                        Add a New Record\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Table Card */}\r\n            <div className=\"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden\">\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full text-left border-collapse\">\r\n                        <thead>\r\n                            <tr className=\"bg-slate-50/50 border-b border-slate-100\">\r\n                                <th className=\"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider\">Guest Name</th>\r\n                                <th className=\"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider\">Room Number</th>\r\n                                <th className=\"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider\">Check-in Time</th>\r\n                                <th className=\"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider\">Checked Out Date</th>\r\n                                <th className=\"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider\">Stay Length</th>\r\n                                <th className=\"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider\">Total Amount</th>\r\n                                <th className=\"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider\">Status</th>\r\n                                <th className=\"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider text-right\">Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-slate-50\">\r\n                            {records.map((record) => (\r\n                                <tr key={record.id} className=\"hover:bg-slate-50/80 transition-colors\">\r\n                                    <td className=\"p-4 text-sm font-medium text-slate-700\">{record.guestName}</td>\r\n                                    <td className=\"p-4 text-sm text-slate-600\">{record.roomNumber}</td>\r\n                                    <td className=\"p-4 text-sm text-slate-500 font-mono text-xs\">{record.checkInTime}</td>\r\n                                    <td className=\"p-4 text-sm text-slate-500 font-mono text-xs\">{record.checkOutDate}</td>\r\n                                    <td className=\"p-4 text-sm text-slate-600\">{record.stayLength}</td>\r\n                                    <td className=\"p-4 text-sm font-semibold text-slate-800\">₹{record.totalAmount}</td>\r\n                                    <td className=\"p-4\">\r\n                                        <span className={`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-bold gap-1.5 ${record.status === 'Checked In'\r\n                                            ? 'bg-green-100 text-green-700'\r\n                                            : 'bg-red-100 text-red-700'\r\n                                            }`}>\r\n                                            {record.status}\r\n                                        </span>\r\n                                    </td>\r\n                                    <td className=\"p-4\">\r\n                                        <div className=\"flex items-center justify-end gap-2\">\r\n                                            <Link\r\n                                                href={`/dashboard/records/${record.id}`}\r\n                                                className=\"p-1.5 text-purple-600 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors\"\r\n                                                title=\"View Transactions & History\"\r\n                                            >\r\n                                                <History className=\"w-4 h-4\" />\r\n                                            </Link>\r\n                                            <button\r\n                                                onClick={() => openTransfer(record)}\r\n                                                className=\"p-1.5 text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors\"\r\n                                                title=\"Transfer Room\"\r\n                                            >\r\n                                                <ArrowRightLeft className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={() => handleEdit(record)}\r\n                                                className=\"p-1.5 text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors\"\r\n                                                title=\"Edit Record\"\r\n                                            >\r\n                                                <Edit className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={() => openInvoice(record)}\r\n                                                className=\"p-1.5 text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors\"\r\n                                                title=\"View Invoice\"\r\n                                            >\r\n                                                <FileText className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                        </div>\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n\r\n            <CheckInModal\r\n                isOpen={isModalOpen}\r\n                initialData={selectedRecord}\r\n                onClose={() => setIsModalOpen(false)}\r\n                onSubmit={handleAddRecord}\r\n            />\r\n\r\n            <TransferModal\r\n                isOpen={isTransferOpen}\r\n                onClose={() => setIsTransferOpen(false)}\r\n                guestName={actionRecord?.guestName}\r\n                currentRoom={actionRecord?.roomNumber}\r\n                onTransfer={handleTransferSubmit}\r\n            />\r\n\r\n            <InvoiceModal\r\n                isOpen={isInvoiceOpen}\r\n                onClose={() => setIsInvoiceOpen(false)}\r\n                record={actionRecord}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\n// Removing RoomCard since we switched to Table view as per user request\r\n\r\n"],"names":[],"mappings":"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"}}]
}