{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/hotal_project/web_app/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\r\n\r\nconst prismaClientSingleton = () => {\r\n    return new PrismaClient();\r\n};\r\n\r\ntype PrismaClientSingleton = ReturnType<typeof prismaClientSingleton>;\r\n\r\nconst globalForPrisma = globalThis as unknown as {\r\n    prisma: PrismaClientSingleton | undefined;\r\n};\r\n\r\nexport const prisma = globalForPrisma.prisma ?? prismaClientSingleton();\r\n\r\nif (process.env.NODE_ENV !== 'production') {\r\n    globalForPrisma.prisma = prisma;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,wBAAwB;IAC1B,OAAO,IAAI,sMAAY;AAC3B;AAIA,MAAM,kBAAkB;AAIjB,MAAM,SAAS,gBAAgB,MAAM,IAAI;AAEhD,wCAA2C;IACvC,gBAAgB,MAAM,GAAG;AAC7B"}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///D:/hotal_project/web_app/app/api/dashboard/stats/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { prisma } from \"@/lib/prisma\";\r\n\r\nexport async function GET() {\r\n    try {\r\n        // 1. Get Room Stats\r\n        const roomCounts = await prisma.room.groupBy({\r\n            by: ['status'],\r\n            _count: { status: true },\r\n        });\r\n\r\n        const statsMap = roomCounts.reduce((acc: any, curr) => {\r\n            acc[curr.status.toLowerCase()] = curr._count.status;\r\n            return acc;\r\n        }, {});\r\n\r\n        // 2. Get Recent Logs\r\n        const logs = await prisma.accessLog.findMany({\r\n            take: 5,\r\n            orderBy: { timestamp: 'desc' }\r\n        });\r\n\r\n        // 3. Get Total Guests (Active)\r\n        const totalGuests = await prisma.guest.count({\r\n            where: { status: \"Checked In\" }\r\n        });\r\n\r\n        const stats = {\r\n            occupied: statsMap['occupied'] || 0,\r\n            vacant: statsMap['vacant'] || 0,\r\n            cleaning: statsMap['cleaning'] || 0,\r\n            totalGuests: totalGuests,\r\n            recentLogs: logs,\r\n            revenue: 0, // Placeholder\r\n        };\r\n\r\n        return NextResponse.json(stats);\r\n    } catch (error) {\r\n        console.error(\"Dashboard Stats Error:\", error);\r\n        return NextResponse.json({\r\n            occupied: 0, vacant: 0, cleaning: 0,\r\n            totalGuests: 0, recentLogs: [], revenue: 0\r\n        });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe;IAClB,IAAI;QACA,oBAAoB;QACpB,MAAM,aAAa,MAAM,yHAAM,CAAC,IAAI,CAAC,OAAO,CAAC;YACzC,IAAI;gBAAC;aAAS;YACd,QAAQ;gBAAE,QAAQ;YAAK;QAC3B;QAEA,MAAM,WAAW,WAAW,MAAM,CAAC,CAAC,KAAU;YAC1C,GAAG,CAAC,KAAK,MAAM,CAAC,WAAW,GAAG,GAAG,KAAK,MAAM,CAAC,MAAM;YACnD,OAAO;QACX,GAAG,CAAC;QAEJ,qBAAqB;QACrB,MAAM,OAAO,MAAM,yHAAM,CAAC,SAAS,CAAC,QAAQ,CAAC;YACzC,MAAM;YACN,SAAS;gBAAE,WAAW;YAAO;QACjC;QAEA,+BAA+B;QAC/B,MAAM,cAAc,MAAM,yHAAM,CAAC,KAAK,CAAC,KAAK,CAAC;YACzC,OAAO;gBAAE,QAAQ;YAAa;QAClC;QAEA,MAAM,QAAQ;YACV,UAAU,QAAQ,CAAC,WAAW,IAAI;YAClC,QAAQ,QAAQ,CAAC,SAAS,IAAI;YAC9B,UAAU,QAAQ,CAAC,WAAW,IAAI;YAClC,aAAa;YACb,YAAY;YACZ,SAAS;QACb;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,gJAAY,CAAC,IAAI,CAAC;YACrB,UAAU;YAAG,QAAQ;YAAG,UAAU;YAClC,aAAa;YAAG,YAAY,EAAE;YAAE,SAAS;QAC7C;IACJ;AACJ"}}]
}