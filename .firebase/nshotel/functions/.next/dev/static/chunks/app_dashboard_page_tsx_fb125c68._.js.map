{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/hotal_project/web_app/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport {\r\n    IndianRupee,\r\n    Users,\r\n    BedDouble,\r\n    CalendarDays,\r\n    ArrowRight,\r\n    TrendingUp,\r\n    TrendingDown,\r\n    Clock,\r\n    MoreVertical,\r\n    CheckCircle2,\r\n    XCircle,\r\n    AlertCircle,\r\n    LogOut,\r\n    Activity\r\n} from \"lucide-react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, BarChart, Bar, Cell } from 'recharts';\r\n\r\nexport default function DashboardPage() {\r\n    const [stats, setStats] = useState<any>(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // Poll for updates every 2 seconds\r\n    useEffect(() => {\r\n        const fetchStats = async () => {\r\n            try {\r\n                const res = await fetch('/api/dashboard/stats');\r\n                const data = await res.json();\r\n                setStats(data);\r\n                setLoading(false);\r\n            } catch (error) {\r\n                console.error(\"Failed to fetch stats\", error);\r\n            }\r\n        };\r\n\r\n        fetchStats();\r\n        const interval = setInterval(fetchStats, 2000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    const chartData = stats ? [\r\n        { name: 'Occupied', value: stats.occupied, color: '#22c55e' },\r\n        { name: 'Vacant', value: stats.vacant, color: '#f59e0b' },\r\n        { name: 'Cleaned', value: stats.cleaning, color: '#3b82f6' },\r\n    ] : [];\r\n\r\n    if (loading) {\r\n        return <div className=\"p-10 text-center text-slate-500\">Loading Dashboard...</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n\r\n            {/* Title */}\r\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-slate-800\">Front Desk Overview</h1>\r\n                    <p className=\"text-slate-500 text-sm\">Real-time monitoring active.</p>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold uppercase animate-pulse\">\r\n                    <Activity className=\"w-3 h-3\" /> Live\r\n                </div>\r\n            </div>\r\n\r\n            {/* Stats Grid */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n                <StatCard\r\n                    title=\"Total Revenue\"\r\n                    value={`₹${stats.revenue}`}\r\n                    change=\"0%\"\r\n                    isPositive={true}\r\n                    icon={IndianRupee}\r\n                    color=\"blue\"\r\n                />\r\n                <StatCard\r\n                    title=\"Rev. Per Room\"\r\n                    value=\"₹0\"\r\n                    change=\"0%\"\r\n                    isPositive={true}\r\n                    icon={TrendingUp}\r\n                    color=\"purple\"\r\n                />\r\n                <StatCard\r\n                    title=\"Occupancy Rate\"\r\n                    value={`${Math.round((stats.occupied / (stats.occupied + stats.vacant + stats.cleaning)) * 100 || 0)}%`}\r\n                    change=\"0%\"\r\n                    isPositive={false}\r\n                    icon={BedDouble}\r\n                    color=\"orange\"\r\n                />\r\n                <StatCard\r\n                    title=\"Total Guests\"\r\n                    value={stats.totalGuests}\r\n                    change=\"0\"\r\n                    isPositive={true}\r\n                    icon={Users}\r\n                    color=\"green\"\r\n                />\r\n            </div>\r\n\r\n            {/* Main Content Grid */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n\r\n                {/* Left Column */}\r\n                <div className=\"lg:col-span-2 space-y-6\">\r\n\r\n                    {/* Room Status Chart */}\r\n                    <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-slate-100 min-h-[300px]\">\r\n                        <div className=\"flex items-center justify-between mb-6\">\r\n                            <h3 className=\"text-lg font-bold text-slate-800 flex items-center gap-2\">\r\n                                <BedDouble className=\"w-5 h-5 text-indigo-500\" />\r\n                                Live Room Status\r\n                            </h3>\r\n                        </div>\r\n\r\n                        <div className=\"h-[250px] w-full\">\r\n                            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                <BarChart data={chartData} barSize={60}>\r\n                                    <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#e2e8f0\" />\r\n                                    <XAxis dataKey=\"name\" axisLine={false} tickLine={false} tick={{ fill: '#64748b', fontSize: 13 }} />\r\n                                    <YAxis axisLine={false} tickLine={false} tick={{ fill: '#64748b', fontSize: 13 }} />\r\n                                    <Tooltip\r\n                                        cursor={{ fill: '#f1f5f9' }}\r\n                                        contentStyle={{ borderRadius: '12px', border: 'none', boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)' }}\r\n                                    />\r\n                                    <Bar dataKey=\"value\" radius={[8, 8, 0, 0]}>\r\n                                        {chartData.map((entry: any, index: number) => (\r\n                                            <Cell key={`cell-${index}`} fill={entry.color} />\r\n                                        ))}\r\n                                    </Bar>\r\n                                </BarChart>\r\n                            </ResponsiveContainer>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Live Logs */}\r\n                    <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-slate-100\">\r\n                        <h3 className=\"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2\">\r\n                            <Activity className=\"w-5 h-5 text-teal-500\" />\r\n                            Recent Access Logs (ESP32)\r\n                        </h3>\r\n                        <div className=\"space-y-2\">\r\n                            {stats.recentLogs.length === 0 ? (\r\n                                <p className=\"text-slate-500 text-sm italic\">No logs yet. Scan a card!</p>\r\n                            ) : (\r\n                                stats.recentLogs.map((log: any, i: number) => (\r\n                                    <div key={i} className=\"flex items-center justify-between p-3 bg-slate-50 rounded-xl border border-slate-100\">\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <div className={`w-2 h-2 rounded-full ${log.access ? 'bg-green-500' : 'bg-red-500'}`} />\r\n                                            <div>\r\n                                                <p className=\"text-sm font-semibold text-slate-900\">Card: {log.cardId}</p>\r\n                                                <p className=\"text-xs text-slate-500\">{new Date(log.timestamp).toLocaleTimeString()}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <span className={`text-xs font-bold px-2 py-1 rounded-md ${log.access ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>\r\n                                            {log.message}\r\n                                        </span>\r\n                                    </div>\r\n                                ))\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                {/* Right Column */}\r\n                <div className=\"space-y-6\">\r\n\r\n                    {/* Quick Actions */}\r\n                    <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-slate-100\">\r\n                        <h3 className=\"text-lg font-bold text-slate-800 mb-4\">Quick Actions</h3>\r\n                        <div className=\"grid grid-cols-1 gap-3\">\r\n                            <Link href=\"/dashboard/records\" className=\"h-12 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/20 flex items-center justify-center gap-2 transition-colors\">\r\n                                <CalendarDays className=\"w-4 h-4\" />\r\n                                Reserve Room\r\n                            </Link>\r\n                            <Link href=\"/dashboard/records\" className=\"h-12 bg-white border border-slate-200 hover:border-blue-500 text-slate-700 hover:text-blue-600 rounded-xl font-semibold flex items-center justify-center gap-2 transition-colors\">\r\n                                <CheckCircle2 className=\"w-4 h-4\" />\r\n                                Check In\r\n                            </Link>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction StatCard({ title, value, change, isPositive, icon: Icon, color }: any) {\r\n    const colorStyles = {\r\n        blue: \"bg-blue-50 text-blue-600\",\r\n        purple: \"bg-purple-50 text-purple-600\",\r\n        orange: \"bg-orange-50 text-orange-600\",\r\n        green: \"bg-green-50 text-green-600\",\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 hover:shadow-md transition-shadow\">\r\n            <div className=\"flex items-start justify-between\">\r\n                <div>\r\n                    <p className=\"text-slate-500 text-sm font-medium mb-1\">{title}</p>\r\n                    <h3 className=\"text-2xl font-bold text-slate-800\">{value}</h3>\r\n                </div>\r\n                <div className={`p-3 rounded-xl ${colorStyles[color as keyof typeof colorStyles]}`}>\r\n                    <Icon className=\"w-6 h-6\" />\r\n                </div>\r\n            </div>\r\n            <div className=\"mt-4 flex items-center text-sm\">\r\n                <span className={`font-semibold ${isPositive ? 'text-green-600' : 'text-red-600'} flex items-center`}>\r\n                    {isPositive ? <TrendingUp className=\"w-3 h-3 mr-1\" /> : <TrendingDown className=\"w-3 h-3 mr-1\" />}\r\n                    {change}\r\n                </span>\r\n                <span className=\"text-slate-400 ml-2\">vs last week</span>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AApBA;;;;;AAsBe,SAAS;;IACpB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAM;IACxC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,mCAAmC;IACnC,IAAA,0KAAS;mCAAC;YACN,MAAM;sDAAa;oBACf,IAAI;wBACA,MAAM,MAAM,MAAM,MAAM;wBACxB,MAAM,OAAO,MAAM,IAAI,IAAI;wBAC3B,SAAS;wBACT,WAAW;oBACf,EAAE,OAAO,OAAO;wBACZ,QAAQ,KAAK,CAAC,yBAAyB;oBAC3C;gBACJ;;YAEA;YACA,MAAM,WAAW,YAAY,YAAY;YACzC;2CAAO,IAAM,cAAc;;QAC/B;kCAAG,EAAE;IAEL,MAAM,YAAY,QAAQ;QACtB;YAAE,MAAM;YAAY,OAAO,MAAM,QAAQ;YAAE,OAAO;QAAU;QAC5D;YAAE,MAAM;YAAU,OAAO,MAAM,MAAM;YAAE,OAAO;QAAU;QACxD;YAAE,MAAM;YAAW,OAAO,MAAM,QAAQ;YAAE,OAAO;QAAU;KAC9D,GAAG,EAAE;IAEN,IAAI,SAAS;QACT,qBAAO,6LAAC;YAAI,WAAU;sBAAkC;;;;;;IAC5D;IAEA,qBACI,6LAAC;QAAI,WAAU;;0BAGX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;;0CACG,6LAAC;gCAAG,WAAU;0CAAoC;;;;;;0CAClD,6LAAC;gCAAE,WAAU;0CAAyB;;;;;;;;;;;;kCAE1C,6LAAC;wBAAI,WAAU;;0CACX,6LAAC,yNAAQ;gCAAC,WAAU;;;;;;4BAAY;;;;;;;;;;;;;0BAKxC,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBACG,OAAM;wBACN,OAAO,CAAC,CAAC,EAAE,MAAM,OAAO,EAAE;wBAC1B,QAAO;wBACP,YAAY;wBACZ,MAAM,sOAAW;wBACjB,OAAM;;;;;;kCAEV,6LAAC;wBACG,OAAM;wBACN,OAAM;wBACN,QAAO;wBACP,YAAY;wBACZ,MAAM,mOAAU;wBAChB,OAAM;;;;;;kCAEV,6LAAC;wBACG,OAAM;wBACN,OAAO,GAAG,KAAK,KAAK,CAAC,AAAC,MAAM,QAAQ,GAAG,CAAC,MAAM,QAAQ,GAAG,MAAM,MAAM,GAAG,MAAM,QAAQ,IAAK,OAAO,GAAG,CAAC,CAAC;wBACvG,QAAO;wBACP,YAAY;wBACZ,MAAM,gOAAS;wBACf,OAAM;;;;;;kCAEV,6LAAC;wBACG,OAAM;wBACN,OAAO,MAAM,WAAW;wBACxB,QAAO;wBACP,YAAY;wBACZ,MAAM,gNAAK;wBACX,OAAM;;;;;;;;;;;;0BAKd,6LAAC;gBAAI,WAAU;;kCAGX,6LAAC;wBAAI,WAAU;;0CAGX,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAI,WAAU;kDACX,cAAA,6LAAC;4CAAG,WAAU;;8DACV,6LAAC,gOAAS;oDAAC,WAAU;;;;;;gDAA4B;;;;;;;;;;;;kDAKzD,6LAAC;wCAAI,WAAU;kDACX,cAAA,6LAAC,6LAAmB;4CAAC,OAAM;4CAAO,QAAO;sDACrC,cAAA,6LAAC,mKAAQ;gDAAC,MAAM;gDAAW,SAAS;;kEAChC,6LAAC,iLAAa;wDAAC,iBAAgB;wDAAM,UAAU;wDAAO,QAAO;;;;;;kEAC7D,6LAAC,iKAAK;wDAAC,SAAQ;wDAAO,UAAU;wDAAO,UAAU;wDAAO,MAAM;4DAAE,MAAM;4DAAW,UAAU;wDAAG;;;;;;kEAC9F,6LAAC,iKAAK;wDAAC,UAAU;wDAAO,UAAU;wDAAO,MAAM;4DAAE,MAAM;4DAAW,UAAU;wDAAG;;;;;;kEAC/E,6LAAC,qKAAO;wDACJ,QAAQ;4DAAE,MAAM;wDAAU;wDAC1B,cAAc;4DAAE,cAAc;4DAAQ,QAAQ;4DAAQ,WAAW;wDAAkC;;;;;;kEAEvG,6LAAC,6JAAG;wDAAC,SAAQ;wDAAQ,QAAQ;4DAAC;4DAAG;4DAAG;4DAAG;yDAAE;kEACpC,UAAU,GAAG,CAAC,CAAC,OAAY,sBACxB,6LAAC,+JAAI;gEAAuB,MAAM,MAAM,KAAK;+DAAlC,CAAC,KAAK,EAAE,OAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0CASlD,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAG,WAAU;;0DACV,6LAAC,yNAAQ;gDAAC,WAAU;;;;;;4CAA0B;;;;;;;kDAGlD,6LAAC;wCAAI,WAAU;kDACV,MAAM,UAAU,CAAC,MAAM,KAAK,kBACzB,6LAAC;4CAAE,WAAU;sDAAgC;;;;;mDAE7C,MAAM,UAAU,CAAC,GAAG,CAAC,CAAC,KAAU,kBAC5B,6LAAC;gDAAY,WAAU;;kEACnB,6LAAC;wDAAI,WAAU;;0EACX,6LAAC;gEAAI,WAAW,CAAC,qBAAqB,EAAE,IAAI,MAAM,GAAG,iBAAiB,cAAc;;;;;;0EACpF,6LAAC;;kFACG,6LAAC;wEAAE,WAAU;;4EAAuC;4EAAO,IAAI,MAAM;;;;;;;kFACrE,6LAAC;wEAAE,WAAU;kFAA0B,IAAI,KAAK,IAAI,SAAS,EAAE,kBAAkB;;;;;;;;;;;;;;;;;;kEAGzF,6LAAC;wDAAK,WAAW,CAAC,uCAAuC,EAAE,IAAI,MAAM,GAAG,gCAAgC,2BAA2B;kEAC9H,IAAI,OAAO;;;;;;;+CATV;;;;;;;;;;;;;;;;;;;;;;kCAoB9B,6LAAC;wBAAI,WAAU;kCAGX,cAAA,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAG,WAAU;8CAAwC;;;;;;8CACtD,6LAAC;oCAAI,WAAU;;sDACX,6LAAC,0KAAI;4CAAC,MAAK;4CAAqB,WAAU;;8DACtC,6LAAC,yOAAY;oDAAC,WAAU;;;;;;gDAAY;;;;;;;sDAGxC,6LAAC,0KAAI;4CAAC,MAAK;4CAAqB,WAAU;;8DACtC,6LAAC,wOAAY;oDAAC,WAAU;;;;;;gDAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUpE;GAzKwB;KAAA;AA2KxB,SAAS,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,UAAU,EAAE,MAAM,IAAI,EAAE,KAAK,EAAO;IAC1E,MAAM,cAAc;QAChB,MAAM;QACN,QAAQ;QACR,QAAQ;QACR,OAAO;IACX;IAEA,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;;0CACG,6LAAC;gCAAE,WAAU;0CAA2C;;;;;;0CACxD,6LAAC;gCAAG,WAAU;0CAAqC;;;;;;;;;;;;kCAEvD,6LAAC;wBAAI,WAAW,CAAC,eAAe,EAAE,WAAW,CAAC,MAAkC,EAAE;kCAC9E,cAAA,6LAAC;4BAAK,WAAU;;;;;;;;;;;;;;;;;0BAGxB,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAK,WAAW,CAAC,cAAc,EAAE,aAAa,mBAAmB,eAAe,kBAAkB,CAAC;;4BAC/F,2BAAa,6LAAC,mOAAU;gCAAC,WAAU;;;;;qDAAoB,6LAAC,yOAAY;gCAAC,WAAU;;;;;;4BAC/E;;;;;;;kCAEL,6LAAC;wBAAK,WAAU;kCAAsB;;;;;;;;;;;;;;;;;;AAItD;MA5BS"}}]
}