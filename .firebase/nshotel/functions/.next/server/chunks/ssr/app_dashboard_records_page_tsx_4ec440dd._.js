module.exports=[29955,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(15618),f=a.i(70106);let g=(0,f.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var h=a.i(4720);let i=(0,f.default)("arrow-right-left",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);var j=a.i(91965);let k=(0,f.default)("door-closed",[["path",{d:"M10 12h.01",key:"1kxr2c"}],["path",{d:"M18 20V6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14",key:"36qu9e"}],["path",{d:"M2 20h20",key:"owomy5"}]]);var l=a.i(46271),m=a.i(62036),n=a.i(33508),o=a.i(46842);let p=(0,f.default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var q=a.i(81402),r=a.i(14548);function s({isOpen:a,onClose:d,onSubmit:e,initialData:f}){let[g,h]=(0,c.useState)([]),i={guestName:"",adults:1,children:0,rfid:"",phone:"",email:"",aadhar:"",roomNumber:"",roomType:"",rate:0,roomTariff:0,taxAmount:0,totalAmount:0,stayLength:1,checkInTime:"",paymentStatus:"Unpaid",status:"Checked In"},[j,s]=(0,c.useState)(i);(0,c.useEffect)(()=>{if(a)if(fetch("/api/rooms").then(a=>a.json()).then(a=>h(a)).catch(a=>console.error("Failed to fetch rooms",a)),f)s({...i,...f,checkInTime:f.checkInTime?f.checkInTime.replace(" ","T").slice(0,16):"",stayLength:parseInt(f.stayLength)||1});else{let a=new Date;a.setMinutes(a.getMinutes()-a.getTimezoneOffset()),s({...i,checkInTime:a.toISOString().slice(0,16)})}},[a,f]),(0,c.useEffect)(()=>{if(j.roomNumber){let a=g.find(a=>a.id===j.roomNumber);a&&s(b=>({...b,roomType:a.type}))}},[j.roomNumber,g]),(0,c.useEffect)(()=>{let a=Number(j.roomTariff)||0,b=Number(j.taxAmount)||0;s(c=>({...c,totalAmount:a+b}))},[j.roomTariff,j.taxAmount]);let t=a=>{let{name:b,value:c}=a.target;s(a=>({...a,[b]:c}))};return(0,b.jsx)(m.AnimatePresence,{children:a&&(0,b.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-6",children:[(0,b.jsx)(l.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:d,className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,b.jsxs)(l.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative bg-white w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-2xl shadow-2xl flex flex-col",children:[(0,b.jsxs)("div",{className:"sticky top-0 bg-white z-10 border-b border-slate-100 px-6 py-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-slate-800",children:"New Concierge Check-In"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Enter guest details to create a new record"})]}),(0,b.jsx)("button",{onClick:d,className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:(0,b.jsx)(n.X,{className:"w-6 h-6 text-slate-500"})})]}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),e(j)},className:"p-6 space-y-8",children:[(0,b.jsxs)("section",{children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[(0,b.jsx)(o.User,{className:"w-5 h-5 text-blue-500"})," Guest Details"]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Guest Name *"}),(0,b.jsx)("input",{name:"guestName",required:!0,value:j.guestName,onChange:t,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none",placeholder:"John Doe"})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Phone"}),(0,b.jsx)("input",{name:"phone",value:j.phone,onChange:t,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none",placeholder:"+91 9876543210"})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Email (For Rewards)"}),(0,b.jsx)("input",{type:"email",name:"email",value:j.email,onChange:t,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none",placeholder:"guest@example.com"})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Aadhar Number"}),(0,b.jsx)("input",{name:"aadhar",value:j.aadhar,onChange:t,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none",placeholder:"1234 5678 9012"})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"RF ID"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(q.Key,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),(0,b.jsx)("input",{name:"rfid",value:j.rfid,onChange:t,className:"w-full pl-10 p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none",placeholder:"Scan Card..."})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Adults *"}),(0,b.jsx)("input",{type:"number",name:"adults",min:1,required:!0,value:j.adults,onChange:t,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none"})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Children"}),(0,b.jsx)("input",{type:"number",name:"children",min:0,value:j.children,onChange:t,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none"})]})]})]})]}),(0,b.jsxs)("section",{children:[(0,b.jsx)("div",{className:"h-px bg-slate-100 mb-6"}),(0,b.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[(0,b.jsx)(k,{className:"w-5 h-5 text-purple-500"})," Room Details"]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Room Number *"}),(0,b.jsxs)("select",{name:"roomNumber",required:!0,value:j.roomNumber,onChange:t,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none appearance-none cursor-pointer",children:[(0,b.jsx)("option",{value:"",children:"- Select -"}),g.map(a=>(0,b.jsxs)("option",{value:a.id,disabled:"Vacant"!==a.status,children:["Room ",a.id," (",a.status,")"]},a.id))]})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Room Type"}),(0,b.jsx)("input",{name:"roomType",readOnly:!0,value:j.roomType,className:"w-full p-3 bg-slate-100 border border-slate-200 rounded-xl text-slate-500"})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Rate"}),(0,b.jsx)("input",{type:"number",name:"rate",required:!0,value:j.rate,onChange:t,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none"})]})]})]}),(0,b.jsxs)("section",{children:[(0,b.jsx)("div",{className:"h-px bg-slate-100 mb-6"}),(0,b.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[(0,b.jsx)(p,{className:"w-5 h-5 text-green-500"})," Payment & Stay"]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Room Tariff *"}),(0,b.jsx)("input",{type:"number",name:"roomTariff",required:!0,value:j.roomTariff,onChange:t,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none"})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Tax Amount *"}),(0,b.jsx)("input",{type:"number",name:"taxAmount",required:!0,value:j.taxAmount,onChange:t,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none"})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Total Amount"}),(0,b.jsx)("input",{type:"number",name:"totalAmount",readOnly:!0,value:j.totalAmount,className:"w-full p-3 bg-slate-100 border border-slate-200 rounded-xl text-slate-500 cursor-not-allowed"})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Stay Length (Days) *"}),(0,b.jsx)("input",{type:"number",name:"stayLength",min:1,required:!0,value:j.stayLength,onChange:t,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none"})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Check In Time *"}),(0,b.jsx)("input",{type:"datetime-local",name:"checkInTime",required:!0,value:j.checkInTime,onChange:t,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none"})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Payment Status *"}),(0,b.jsxs)("select",{name:"paymentStatus",required:!0,value:j.paymentStatus,onChange:t,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none appearance-none cursor-pointer",children:[(0,b.jsx)("option",{value:"Paid",children:"Paid"}),(0,b.jsx)("option",{value:"Unpaid",children:"Unpaid"}),(0,b.jsx)("option",{value:"Partial",children:"Partial"})]})]})]})]}),(0,b.jsxs)("div",{className:"sticky bottom-0 bg-white border-t border-slate-100 pt-4 pb-0 flex items-center justify-end gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:d,className:"px-6 py-2.5 rounded-xl border border-slate-200 text-slate-600 font-medium hover:bg-slate-50 transition-colors",children:"Cancel"}),(0,b.jsxs)("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-500/30 flex items-center gap-2",children:[(0,b.jsx)(r.Save,{className:"w-5 h-5"}),"Save Record"]})]})]})]})]})})}function t({isOpen:a,onClose:d,guestName:e,currentRoom:f,onTransfer:g}){let[h,j]=(0,c.useState)("");return(0,b.jsx)(m.AnimatePresence,{children:a&&(0,b.jsxs)("div",{className:"fixed inset-0 z-[105] flex items-center justify-center p-4",children:[(0,b.jsx)(l.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:d,className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),(0,b.jsxs)(l.motion.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"relative bg-white w-full max-w-md rounded-2xl shadow-xl overflow-hidden",children:[(0,b.jsxs)("div",{className:"bg-slate-50 border-b border-slate-100 p-4 flex justify-between items-center",children:[(0,b.jsxs)("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[(0,b.jsx)(i,{className:"w-5 h-5 text-blue-600"})," Transfer Room"]}),(0,b.jsx)("button",{onClick:d,children:(0,b.jsx)(n.X,{className:"w-5 h-5 text-slate-400 hover:text-slate-600"})})]}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),h&&h!==f&&(g(h),d(),j(""))},className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"bg-blue-50 p-4 rounded-xl space-y-2",children:[(0,b.jsx)("p",{className:"text-sm text-blue-600 font-semibold",children:"Current Booking"}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-slate-700 font-medium",children:e}),(0,b.jsxs)("span",{className:"bg-white px-2 py-1 rounded text-xs font-bold text-slate-600 border border-blue-100",children:["Room ",f]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-xs font-bold uppercase text-slate-500",children:"Select New Room"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(k,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),(0,b.jsxs)("select",{required:!0,value:h,onChange:a=>j(a.target.value),className:"w-full pl-10 p-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 appearance-none",children:[(0,b.jsx)("option",{value:"",children:"-- Select Available Room --"}),(0,b.jsxs)("option",{value:"101",disabled:"101"===f,children:["101 ","101"===f&&"(Current)"]}),(0,b.jsxs)("option",{value:"102",disabled:"102"===f,children:["102 ","102"===f&&"(Current)"]}),(0,b.jsxs)("option",{value:"201",disabled:"201"===f,children:["201 ","201"===f&&"(Current)"]}),(0,b.jsxs)("option",{value:"202",disabled:"202"===f,children:["202 ","202"===f&&"(Current)"]})]})]})]}),(0,b.jsxs)("div",{className:"pt-2 flex justify-end gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:d,className:"px-4 py-2 rounded-lg text-slate-600 hover:bg-slate-50 font-medium text-sm",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-blue-600 text-white font-medium text-sm hover:bg-blue-700 shadow-lg shadow-blue-500/20",children:"Transfer Now"})]})]})]})]})})}let u=(0,f.default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);var v=a.i(84505);function w({isOpen:a,onClose:c,record:d}){return d?(0,b.jsx)(m.AnimatePresence,{children:a&&(0,b.jsxs)("div",{className:"fixed inset-0 z-[105] flex items-center justify-center p-4",children:[(0,b.jsx)(l.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:c,className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,b.jsxs)(l.motion.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"relative bg-white w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[(0,b.jsxs)("div",{className:"bg-slate-900 text-white p-6 flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-2",children:[(0,b.jsx)(h.FileText,{className:"w-5 h-5 text-blue-400"})," Invoice"]}),(0,b.jsxs)("p",{className:"text-slate-400 text-sm mt-1",children:["#INV-",Date.now().toString().slice(-6)]})]}),(0,b.jsx)("button",{onClick:c,className:"bg-white/10 p-2 rounded-full hover:bg-white/20 transition-colors",children:(0,b.jsx)(n.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"p-8 space-y-6 overflow-y-auto",children:[(0,b.jsxs)("div",{className:"text-center border-b border-slate-100 pb-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"Luxe Ocean Hotel"}),(0,b.jsx)("p",{className:"text-slate-500 text-sm",children:"123 Beach Road, Chennai"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-slate-400 uppercase text-xs font-bold mb-1",children:"Guest Name"}),(0,b.jsx)("p",{className:"font-semibold text-slate-800",children:d.guestName})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-slate-400 uppercase text-xs font-bold mb-1",children:"Room No."}),(0,b.jsx)("p",{className:"font-semibold text-slate-800 text-lg",children:d.roomNumber})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-slate-400 uppercase text-xs font-bold mb-1",children:"Check In"}),(0,b.jsx)("p",{className:"font-medium text-slate-700",children:d.checkInTime})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-slate-400 uppercase text-xs font-bold mb-1",children:"Stay Duration"}),(0,b.jsx)("p",{className:"font-medium text-slate-700",children:d.stayLength})]})]}),(0,b.jsxs)("div",{className:"bg-slate-50 rounded-xl p-4",children:[(0,b.jsxs)("div",{className:"flex justify-between mb-2 text-sm",children:[(0,b.jsx)("span",{className:"text-slate-600",children:"Room Charges"}),(0,b.jsxs)("span",{className:"font-medium",children:["₹",.9*Number(d.totalAmount)]})]}),(0,b.jsxs)("div",{className:"flex justify-between mb-2 text-sm",children:[(0,b.jsx)("span",{className:"text-slate-600",children:"Taxes (10%)"}),(0,b.jsxs)("span",{className:"font-medium",children:["₹",.1*Number(d.totalAmount)]})]}),(0,b.jsxs)("div",{className:"border-t border-slate-200 my-2 pt-2 flex justify-between items-center",children:[(0,b.jsx)("span",{className:"font-bold text-slate-800",children:"Total Amount"}),(0,b.jsxs)("span",{className:"font-bold text-blue-600 text-lg",children:["₹",d.totalAmount]})]})]}),(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsxs)("span",{className:`px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wide border ${"Checked In"===d.status?"bg-green-50 text-green-600 border-green-200":"bg-red-50 text-red-600 border-red-200"}`,children:["Status: ",d.status]})})]}),(0,b.jsxs)("div",{className:"p-4 border-t border-slate-100 flex gap-3 bg-slate-50",children:[(0,b.jsxs)("button",{className:"flex-1 py-3 bg-white border border-slate-200 text-slate-700 rounded-xl font-semibold text-sm hover:bg-slate-100 flex items-center justify-center gap-2 transition-colors",children:[(0,b.jsx)(u,{className:"w-4 h-4"})," Print"]}),(0,b.jsxs)("button",{className:"flex-1 py-3 bg-blue-600 text-white rounded-xl font-semibold text-sm hover:bg-blue-700 flex items-center justify-center gap-2 shadow-lg shadow-blue-500/30 transition-colors",children:[(0,b.jsx)(v.Download,{className:"w-4 h-4"})," Download PDF"]})]})]})]})}):null}function x(){let[a,f]=(0,c.useState)([]),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!0),[r,u]=(0,c.useState)(!1),[v,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(null),A=async()=>{try{let a=await fetch("/api/guests");if(a.ok){let b=(await a.json()).map(a=>({id:a.id,guestName:a.name,roomNumber:a.room?.id||"N/A",checkInTime:new Date(a.checkInTime).toLocaleString(),checkOutDate:a.checkOutTime?new Date(a.checkOutTime).toLocaleString():"-",stayLength:a.stayLength+" days",totalAmount:a.totalAmount,status:a.status}));f(b)}}catch(a){console.error(a)}finally{q(!1)}};(0,c.useEffect)(()=>{A()},[]);let B=async a=>{let b={name:a.guestName,roomId:a.roomNumber,cardId:a.rfid||null,phone:a.phone,email:a.email,aadhar:a.aadhar,paymentStatus:a.paymentStatus,totalAmount:a.totalAmount},c=await fetch("/api/guests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(c.ok)A(),o(!1);else{let a=await c.json();alert(`Check-in Failed: ${a.error}`)}},C=async a=>{if(confirm("Are you sure you want to check out this guest?"))try{(await fetch(`/api/guests/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"Checked Out"})})).ok?A():alert("Failed to check out guest")}catch(a){console.error("Checkout error:",a)}},D=async a=>{if(y)try{let b=await fetch("/api/guests/transfer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guestId:y.id,oldRoomId:y.roomNumber,newRoomId:a})});if(b.ok)A(),u(!1);else{let a=await b.json();alert(`Transfer Failed: ${a.error}`)}}catch(a){console.error("Transfer error:",a)}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-slate-800",children:"Active Check Ins"}),(0,b.jsx)("p",{className:"text-slate-500 text-sm",children:"Manage guest check-ins and history"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(d.default,{href:"/dashboard",className:"px-4 py-2 border border-slate-200 rounded-lg text-slate-600 hover:bg-slate-50 text-sm font-medium transition-colors",children:"Back"}),(0,b.jsxs)("button",{onClick:()=>{m(null),o(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-colors shadow-lg shadow-blue-500/30",children:[(0,b.jsx)(e.Plus,{className:"w-4 h-4"}),"Add a New Record"]})]})]}),(0,b.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-slate-50/50 border-b border-slate-100",children:[(0,b.jsx)("th",{className:"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider",children:"Guest Name"}),(0,b.jsx)("th",{className:"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider",children:"Room Number"}),(0,b.jsx)("th",{className:"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider",children:"Check-in Time"}),(0,b.jsx)("th",{className:"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider",children:"Checked Out Date"}),(0,b.jsx)("th",{className:"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider",children:"Stay Length"}),(0,b.jsx)("th",{className:"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider",children:"Total Amount"}),(0,b.jsx)("th",{className:"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider",children:"Status"}),(0,b.jsx)("th",{className:"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider text-right",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-slate-50",children:a.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-slate-50/80 transition-colors",children:[(0,b.jsx)("td",{className:"p-4 text-sm font-medium text-slate-700",children:a.guestName}),(0,b.jsx)("td",{className:"p-4 text-sm text-slate-600",children:a.roomNumber}),(0,b.jsx)("td",{className:"p-4 text-sm text-slate-500 font-mono text-xs",children:a.checkInTime}),(0,b.jsx)("td",{className:"p-4 text-sm text-slate-500 font-mono text-xs",children:a.checkOutDate}),(0,b.jsx)("td",{className:"p-4 text-sm text-slate-600",children:a.stayLength}),(0,b.jsxs)("td",{className:"p-4 text-sm font-semibold text-slate-800",children:["₹",a.totalAmount]}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-bold gap-1.5 ${"Checked In"===a.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:a.status})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:["Checked In"===a.status&&(0,b.jsx)("button",{onClick:()=>C(a.id),className:"p-1.5 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",title:"Check Out Guest",children:(0,b.jsx)(k,{className:"w-4 h-4"})}),(0,b.jsx)(d.default,{href:`/dashboard/records/${a.id}`,className:"p-1.5 text-purple-600 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors",title:"View Transactions & History",children:(0,b.jsx)(j.History,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>{z(a),u(!0)},className:"p-1.5 text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",title:"Transfer Room",children:(0,b.jsx)(i,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>{m(a),o(!0)},className:"p-1.5 text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",title:"Edit Record",children:(0,b.jsx)(g,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>{z(a),x(!0)},className:"p-1.5 text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",title:"View Invoice",children:(0,b.jsx)(h.FileText,{className:"w-4 h-4"})})]})})]},a.id))})]})})}),(0,b.jsx)(s,{isOpen:n,initialData:l,onClose:()=>o(!1),onSubmit:B}),(0,b.jsx)(t,{isOpen:r,onClose:()=>u(!1),guestName:y?.guestName,currentRoom:y?.roomNumber,onTransfer:D}),(0,b.jsx)(w,{isOpen:v,onClose:()=>x(!1),record:y})]})}a.s(["default",()=>x],29955)}];

//# sourceMappingURL=app_dashboard_records_page_tsx_4ec440dd._.js.map