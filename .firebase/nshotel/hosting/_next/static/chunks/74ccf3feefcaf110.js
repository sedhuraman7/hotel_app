(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88653,e=>{"use strict";e.i(47167);var t=e.i(43476),s=e.i(71645),a=e.i(31178),l=e.i(47414),r=e.i(74008),n=e.i(21476),i=e.i(72846),o=s,c=e.i(37806);function d(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class u extends o.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,s=(0,i.isHTMLElement)(e)&&e.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function x({children:e,isPresent:a,anchorX:l,root:r}){let n=(0,o.useId)(),i=(0,o.useRef)(null),x=(0,o.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:m}=(0,o.useContext)(c.MotionConfigContext),h=function(...e){return s.useCallback(function(...e){return t=>{let s=!1,a=e.map(e=>{let a=d(e,t);return s||"function"!=typeof a||(s=!0),a});if(s)return()=>{for(let t=0;t<a.length;t++){let s=a[t];"function"==typeof s?s():d(e[t],null)}}}}(...e),e)}(i,e.props?.ref??e?.ref);return(0,o.useInsertionEffect)(()=>{let{width:e,height:t,top:s,left:o,right:c}=x.current;if(a||!i.current||!e||!t)return;let d="left"===l?`left: ${o}`:`right: ${c}`;i.current.dataset.motionPopId=n;let u=document.createElement("style");m&&(u.nonce=m);let h=r??document.head;return h.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${d}px !important;
            top: ${s}px !important;
          }
        `),()=>{h.contains(u)&&h.removeChild(u)}},[a]),(0,t.jsx)(u,{isPresent:a,childRef:i,sizeRef:x,children:o.cloneElement(e,{ref:h})})}let m=({children:e,initial:a,isPresent:r,onExitComplete:i,custom:o,presenceAffectsLayout:c,mode:d,anchorX:u,root:m})=>{let p=(0,l.useConstant)(h),b=(0,s.useId)(),f=!0,j=(0,s.useMemo)(()=>(f=!1,{id:b,initial:a,isPresent:r,custom:o,onExitComplete:e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;i&&i()},register:e=>(p.set(e,!1),()=>p.delete(e))}),[r,p,i]);return c&&f&&(j={...j}),(0,s.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[r]),s.useEffect(()=>{r||p.size||!i||i()},[r]),"popLayout"===d&&(e=(0,t.jsx)(x,{isPresent:r,anchorX:u,root:m,children:e})),(0,t.jsx)(n.PresenceContext.Provider,{value:j,children:e})};function h(){return new Map}var p=e.i(64978);let b=e=>e.key||"";function f(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}let j=({children:e,custom:n,initial:i=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:d="sync",propagate:u=!1,anchorX:x="left",root:h})=>{let[j,g]=(0,p.usePresence)(u),N=(0,s.useMemo)(()=>f(e),[e]),y=u&&!j?[]:N.map(b),v=(0,s.useRef)(!0),w=(0,s.useRef)(N),k=(0,l.useConstant)(()=>new Map),C=(0,s.useRef)(new Set),[T,S]=(0,s.useState)(N),[A,I]=(0,s.useState)(N);(0,r.useIsomorphicLayoutEffect)(()=>{v.current=!1,w.current=N;for(let e=0;e<A.length;e++){let t=b(A[e]);y.includes(t)?(k.delete(t),C.current.delete(t)):!0!==k.get(t)&&k.set(t,!1)}},[A,y.length,y.join("-")]);let R=[];if(N!==T){let e=[...N];for(let t=0;t<A.length;t++){let s=A[t],a=b(s);y.includes(a)||(e.splice(t,0,s),R.push(s))}return"wait"===d&&R.length&&(e=R),I(f(e)),S(N),null}let{forceRender:M}=(0,s.useContext)(a.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:A.map(e=>{let s=b(e),a=(!u||!!j)&&(N===A||y.includes(s));return(0,t.jsx)(m,{isPresent:a,initial:(!v.current||!!i)&&void 0,custom:n,presenceAffectsLayout:c,mode:d,root:h,onExitComplete:a?void 0:()=>{if(C.current.has(s)||(C.current.add(s),!k.has(s)))return;k.set(s,!0);let e=!0;k.forEach(t=>{t||(e=!1)}),e&&(M?.(),I(w.current),u&&g?.(),o&&o())},anchorX:x,children:e},s)})})};e.s(["AnimatePresence",()=>j],88653)},7233,37727,e=>{"use strict";var t=e.i(75254);let s=(0,t.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>s],7233);let a=(0,t.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>a],37727)},34161,e=>{"use strict";let t=(0,e.i(75254).default)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);e.s(["Key",()=>t],34161)},56909,e=>{"use strict";let t=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],40160)},84614,e=>{"use strict";let t=(0,e.i(75254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],84614)},27516,e=>{"use strict";let t=(0,e.i(75254).default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);e.s(["History",()=>t],27516)},34400,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(22016),l=e.i(7233),r=e.i(75254);let n=(0,r.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var i=e.i(78583);let o=(0,r.default)("arrow-right-left",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);var c=e.i(27516);let d=(0,r.default)("door-closed",[["path",{d:"M10 12h.01",key:"1kxr2c"}],["path",{d:"M18 20V6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14",key:"36qu9e"}],["path",{d:"M2 20h20",key:"owomy5"}]]);var u=e.i(46932),x=e.i(88653),m=e.i(37727),h=e.i(84614);let p=(0,r.default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var b=e.i(34161),f=e.i(56909);function j({isOpen:e,onClose:a,onSubmit:l,initialData:r}){let[n,i]=(0,s.useState)([]),o={guestName:"",adults:1,children:0,rfid:"",phone:"",email:"",aadhar:"",roomNumber:"",roomType:"",rate:0,roomTariff:0,taxAmount:0,totalAmount:0,stayLength:1,checkInTime:"",paymentStatus:"Unpaid",status:"Checked In"},[c,j]=(0,s.useState)(o);(0,s.useEffect)(()=>{if(e)if(fetch("/api/rooms").then(e=>e.json()).then(e=>i(e)).catch(e=>console.error("Failed to fetch rooms",e)),r)j({...o,...r,checkInTime:r.checkInTime?r.checkInTime.replace(" ","T").slice(0,16):"",stayLength:parseInt(r.stayLength)||1});else{let e=new Date;e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),j({...o,checkInTime:e.toISOString().slice(0,16)})}},[e,r]),(0,s.useEffect)(()=>{if(c.roomNumber){let e=n.find(e=>e.id===c.roomNumber);e&&j(t=>({...t,roomType:e.type}))}},[c.roomNumber,n]),(0,s.useEffect)(()=>{let e=Number(c.roomTariff)||0,t=Number(c.taxAmount)||0;j(s=>({...s,totalAmount:e+t}))},[c.roomTariff,c.taxAmount]);let g=e=>{let{name:t,value:s}=e.target;j(e=>({...e,[t]:s}))};return(0,t.jsx)(x.AnimatePresence,{children:e&&(0,t.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-6",children:[(0,t.jsx)(u.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a,className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,t.jsxs)(u.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative bg-white w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-2xl shadow-2xl flex flex-col",children:[(0,t.jsxs)("div",{className:"sticky top-0 bg-white z-10 border-b border-slate-100 px-6 py-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-slate-800",children:"New Concierge Check-In"}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"Enter guest details to create a new record"})]}),(0,t.jsx)("button",{onClick:a,className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:(0,t.jsx)(m.X,{className:"w-6 h-6 text-slate-500"})})]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l(c)},className:"p-6 space-y-8",children:[(0,t.jsxs)("section",{children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[(0,t.jsx)(h.User,{className:"w-5 h-5 text-blue-500"})," Guest Details"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Guest Name *"}),(0,t.jsx)("input",{name:"guestName",required:!0,value:c.guestName,onChange:g,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none",placeholder:"John Doe"})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Phone"}),(0,t.jsx)("input",{name:"phone",value:c.phone,onChange:g,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none",placeholder:"+91 9876543210"})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Email (For Rewards)"}),(0,t.jsx)("input",{type:"email",name:"email",value:c.email,onChange:g,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none",placeholder:"guest@example.com"})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Aadhar Number"}),(0,t.jsx)("input",{name:"aadhar",value:c.aadhar,onChange:g,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none",placeholder:"1234 5678 9012"})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"RF ID"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(b.Key,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),(0,t.jsx)("input",{name:"rfid",value:c.rfid,onChange:g,className:"w-full pl-10 p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none",placeholder:"Scan Card..."})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Adults *"}),(0,t.jsx)("input",{type:"number",name:"adults",min:1,required:!0,value:c.adults,onChange:g,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Children"}),(0,t.jsx)("input",{type:"number",name:"children",min:0,value:c.children,onChange:g,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none"})]})]})]})]}),(0,t.jsxs)("section",{children:[(0,t.jsx)("div",{className:"h-px bg-slate-100 mb-6"}),(0,t.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[(0,t.jsx)(d,{className:"w-5 h-5 text-purple-500"})," Room Details"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Room Number *"}),(0,t.jsxs)("select",{name:"roomNumber",required:!0,value:c.roomNumber,onChange:g,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none appearance-none cursor-pointer",children:[(0,t.jsx)("option",{value:"",children:"- Select -"}),n.map(e=>(0,t.jsxs)("option",{value:e.id,disabled:"Vacant"!==e.status,children:["Room ",e.id," (",e.status,")"]},e.id))]})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Room Type"}),(0,t.jsx)("input",{name:"roomType",readOnly:!0,value:c.roomType,className:"w-full p-3 bg-slate-100 border border-slate-200 rounded-xl text-slate-500"})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Rate"}),(0,t.jsx)("input",{type:"number",name:"rate",required:!0,value:c.rate,onChange:g,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none"})]})]})]}),(0,t.jsxs)("section",{children:[(0,t.jsx)("div",{className:"h-px bg-slate-100 mb-6"}),(0,t.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[(0,t.jsx)(p,{className:"w-5 h-5 text-green-500"})," Payment & Stay"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Room Tariff *"}),(0,t.jsx)("input",{type:"number",name:"roomTariff",required:!0,value:c.roomTariff,onChange:g,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Tax Amount *"}),(0,t.jsx)("input",{type:"number",name:"taxAmount",required:!0,value:c.taxAmount,onChange:g,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Total Amount"}),(0,t.jsx)("input",{type:"number",name:"totalAmount",readOnly:!0,value:c.totalAmount,className:"w-full p-3 bg-slate-100 border border-slate-200 rounded-xl text-slate-500 cursor-not-allowed"})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Stay Length (Days) *"}),(0,t.jsx)("input",{type:"number",name:"stayLength",min:1,required:!0,value:c.stayLength,onChange:g,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Check In Time *"}),(0,t.jsx)("input",{type:"datetime-local",name:"checkInTime",required:!0,value:c.checkInTime,onChange:g,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Payment Status *"}),(0,t.jsxs)("select",{name:"paymentStatus",required:!0,value:c.paymentStatus,onChange:g,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none appearance-none cursor-pointer",children:[(0,t.jsx)("option",{value:"Paid",children:"Paid"}),(0,t.jsx)("option",{value:"Unpaid",children:"Unpaid"}),(0,t.jsx)("option",{value:"Partial",children:"Partial"})]})]})]})]}),(0,t.jsxs)("div",{className:"sticky bottom-0 bg-white border-t border-slate-100 pt-4 pb-0 flex items-center justify-end gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:a,className:"px-6 py-2.5 rounded-xl border border-slate-200 text-slate-600 font-medium hover:bg-slate-50 transition-colors",children:"Cancel"}),(0,t.jsxs)("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-500/30 flex items-center gap-2",children:[(0,t.jsx)(f.Save,{className:"w-5 h-5"}),"Save Record"]})]})]})]})]})})}function g({isOpen:e,onClose:a,guestName:l,currentRoom:r,onTransfer:n}){let[i,c]=(0,s.useState)("");return(0,t.jsx)(x.AnimatePresence,{children:e&&(0,t.jsxs)("div",{className:"fixed inset-0 z-[105] flex items-center justify-center p-4",children:[(0,t.jsx)(u.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a,className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),(0,t.jsxs)(u.motion.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"relative bg-white w-full max-w-md rounded-2xl shadow-xl overflow-hidden",children:[(0,t.jsxs)("div",{className:"bg-slate-50 border-b border-slate-100 p-4 flex justify-between items-center",children:[(0,t.jsxs)("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[(0,t.jsx)(o,{className:"w-5 h-5 text-blue-600"})," Transfer Room"]}),(0,t.jsx)("button",{onClick:a,children:(0,t.jsx)(m.X,{className:"w-5 h-5 text-slate-400 hover:text-slate-600"})})]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i&&i!==r&&(n(i),a(),c(""))},className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-xl space-y-2",children:[(0,t.jsx)("p",{className:"text-sm text-blue-600 font-semibold",children:"Current Booking"}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-slate-700 font-medium",children:l}),(0,t.jsxs)("span",{className:"bg-white px-2 py-1 rounded text-xs font-bold text-slate-600 border border-blue-100",children:["Room ",r]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold uppercase text-slate-500",children:"Select New Room"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(d,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),(0,t.jsxs)("select",{required:!0,value:i,onChange:e=>c(e.target.value),className:"w-full pl-10 p-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 appearance-none",children:[(0,t.jsx)("option",{value:"",children:"-- Select Available Room --"}),(0,t.jsxs)("option",{value:"101",disabled:"101"===r,children:["101 ","101"===r&&"(Current)"]}),(0,t.jsxs)("option",{value:"102",disabled:"102"===r,children:["102 ","102"===r&&"(Current)"]}),(0,t.jsxs)("option",{value:"201",disabled:"201"===r,children:["201 ","201"===r&&"(Current)"]}),(0,t.jsxs)("option",{value:"202",disabled:"202"===r,children:["202 ","202"===r&&"(Current)"]})]})]})]}),(0,t.jsxs)("div",{className:"pt-2 flex justify-end gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 rounded-lg text-slate-600 hover:bg-slate-50 font-medium text-sm",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-blue-600 text-white font-medium text-sm hover:bg-blue-700 shadow-lg shadow-blue-500/20",children:"Transfer Now"})]})]})]})]})})}let N=(0,r.default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);var y=e.i(40160);function v({isOpen:e,onClose:s,record:a}){return a?(0,t.jsx)(x.AnimatePresence,{children:e&&(0,t.jsxs)("div",{className:"fixed inset-0 z-[105] flex items-center justify-center p-4",children:[(0,t.jsx)(u.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s,className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,t.jsxs)(u.motion.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"relative bg-white w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[(0,t.jsxs)("div",{className:"bg-slate-900 text-white p-6 flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-2",children:[(0,t.jsx)(i.FileText,{className:"w-5 h-5 text-blue-400"})," Invoice"]}),(0,t.jsxs)("p",{className:"text-slate-400 text-sm mt-1",children:["#INV-",Date.now().toString().slice(-6)]})]}),(0,t.jsx)("button",{onClick:s,className:"bg-white/10 p-2 rounded-full hover:bg-white/20 transition-colors",children:(0,t.jsx)(m.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"p-8 space-y-6 overflow-y-auto",children:[(0,t.jsxs)("div",{className:"text-center border-b border-slate-100 pb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"Luxe Ocean Hotel"}),(0,t.jsx)("p",{className:"text-slate-500 text-sm",children:"123 Beach Road, Chennai"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-slate-400 uppercase text-xs font-bold mb-1",children:"Guest Name"}),(0,t.jsx)("p",{className:"font-semibold text-slate-800",children:a.guestName})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-slate-400 uppercase text-xs font-bold mb-1",children:"Room No."}),(0,t.jsx)("p",{className:"font-semibold text-slate-800 text-lg",children:a.roomNumber})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-slate-400 uppercase text-xs font-bold mb-1",children:"Check In"}),(0,t.jsx)("p",{className:"font-medium text-slate-700",children:a.checkInTime})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-slate-400 uppercase text-xs font-bold mb-1",children:"Stay Duration"}),(0,t.jsx)("p",{className:"font-medium text-slate-700",children:a.stayLength})]})]}),(0,t.jsxs)("div",{className:"bg-slate-50 rounded-xl p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between mb-2 text-sm",children:[(0,t.jsx)("span",{className:"text-slate-600",children:"Room Charges"}),(0,t.jsxs)("span",{className:"font-medium",children:["₹",.9*Number(a.totalAmount)]})]}),(0,t.jsxs)("div",{className:"flex justify-between mb-2 text-sm",children:[(0,t.jsx)("span",{className:"text-slate-600",children:"Taxes (10%)"}),(0,t.jsxs)("span",{className:"font-medium",children:["₹",.1*Number(a.totalAmount)]})]}),(0,t.jsxs)("div",{className:"border-t border-slate-200 my-2 pt-2 flex justify-between items-center",children:[(0,t.jsx)("span",{className:"font-bold text-slate-800",children:"Total Amount"}),(0,t.jsxs)("span",{className:"font-bold text-blue-600 text-lg",children:["₹",a.totalAmount]})]})]}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsxs)("span",{className:`px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wide border ${"Checked In"===a.status?"bg-green-50 text-green-600 border-green-200":"bg-red-50 text-red-600 border-red-200"}`,children:["Status: ",a.status]})})]}),(0,t.jsxs)("div",{className:"p-4 border-t border-slate-100 flex gap-3 bg-slate-50",children:[(0,t.jsxs)("button",{className:"flex-1 py-3 bg-white border border-slate-200 text-slate-700 rounded-xl font-semibold text-sm hover:bg-slate-100 flex items-center justify-center gap-2 transition-colors",children:[(0,t.jsx)(N,{className:"w-4 h-4"})," Print"]}),(0,t.jsxs)("button",{className:"flex-1 py-3 bg-blue-600 text-white rounded-xl font-semibold text-sm hover:bg-blue-700 flex items-center justify-center gap-2 shadow-lg shadow-blue-500/30 transition-colors",children:[(0,t.jsx)(y.Download,{className:"w-4 h-4"})," Download PDF"]})]})]})]})}):null}function w(){let[e,r]=(0,s.useState)([]),[u,x]=(0,s.useState)(null),[m,h]=(0,s.useState)(!1),[p,b]=(0,s.useState)(!0),[f,N]=(0,s.useState)(!1),[y,w]=(0,s.useState)(!1),[k,C]=(0,s.useState)(null),T=async()=>{try{let e=await fetch("/api/guests");if(e.ok){let t=(await e.json()).map(e=>({id:e.id,guestName:e.name,roomNumber:e.room?.id||"N/A",checkInTime:new Date(e.checkInTime).toLocaleString(),checkOutDate:e.checkOutTime?new Date(e.checkOutTime).toLocaleString():"-",stayLength:e.stayLength+" days",totalAmount:e.totalAmount,status:e.status}));r(t)}}catch(e){console.error(e)}finally{b(!1)}};(0,s.useEffect)(()=>{T()},[]);let S=async e=>{let t={name:e.guestName,roomId:e.roomNumber,cardId:e.rfid||null,phone:e.phone,email:e.email,aadhar:e.aadhar,paymentStatus:e.paymentStatus,totalAmount:e.totalAmount},s=await fetch("/api/guests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(s.ok)T(),h(!1);else{let e=await s.json();alert(`Check-in Failed: ${e.error}`)}},A=async e=>{if(confirm("Are you sure you want to check out this guest?"))try{(await fetch(`/api/guests/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"Checked Out"})})).ok?T():alert("Failed to check out guest")}catch(e){console.error("Checkout error:",e)}},I=async e=>{if(k)try{let t=await fetch("/api/guests/transfer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guestId:k.id,oldRoomId:k.roomNumber,newRoomId:e})});if(t.ok)T(),N(!1);else{let e=await t.json();alert(`Transfer Failed: ${e.error}`)}}catch(e){console.error("Transfer error:",e)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-800",children:"Active Check Ins"}),(0,t.jsx)("p",{className:"text-slate-500 text-sm",children:"Manage guest check-ins and history"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(a.default,{href:"/dashboard",className:"px-4 py-2 border border-slate-200 rounded-lg text-slate-600 hover:bg-slate-50 text-sm font-medium transition-colors",children:"Back"}),(0,t.jsxs)("button",{onClick:()=>{x(null),h(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-colors shadow-lg shadow-blue-500/30",children:[(0,t.jsx)(l.Plus,{className:"w-4 h-4"}),"Add a New Record"]})]})]}),(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-slate-50/50 border-b border-slate-100",children:[(0,t.jsx)("th",{className:"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider",children:"Guest Name"}),(0,t.jsx)("th",{className:"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider",children:"Room Number"}),(0,t.jsx)("th",{className:"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider",children:"Check-in Time"}),(0,t.jsx)("th",{className:"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider",children:"Checked Out Date"}),(0,t.jsx)("th",{className:"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider",children:"Stay Length"}),(0,t.jsx)("th",{className:"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider",children:"Total Amount"}),(0,t.jsx)("th",{className:"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"p-4 text-xs font-bold text-blue-600 uppercase tracking-wider text-right",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-slate-50",children:e.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-slate-50/80 transition-colors",children:[(0,t.jsx)("td",{className:"p-4 text-sm font-medium text-slate-700",children:e.guestName}),(0,t.jsx)("td",{className:"p-4 text-sm text-slate-600",children:e.roomNumber}),(0,t.jsx)("td",{className:"p-4 text-sm text-slate-500 font-mono text-xs",children:e.checkInTime}),(0,t.jsx)("td",{className:"p-4 text-sm text-slate-500 font-mono text-xs",children:e.checkOutDate}),(0,t.jsx)("td",{className:"p-4 text-sm text-slate-600",children:e.stayLength}),(0,t.jsxs)("td",{className:"p-4 text-sm font-semibold text-slate-800",children:["₹",e.totalAmount]}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsx)("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-bold gap-1.5 ${"Checked In"===e.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.status})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:["Checked In"===e.status&&(0,t.jsx)("button",{onClick:()=>A(e.id),className:"p-1.5 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",title:"Check Out Guest",children:(0,t.jsx)(d,{className:"w-4 h-4"})}),(0,t.jsx)(a.default,{href:`/dashboard/records/${e.id}`,className:"p-1.5 text-purple-600 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors",title:"View Transactions & History",children:(0,t.jsx)(c.History,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>{C(e),N(!0)},className:"p-1.5 text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",title:"Transfer Room",children:(0,t.jsx)(o,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>{x(e),h(!0)},className:"p-1.5 text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",title:"Edit Record",children:(0,t.jsx)(n,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>{C(e),w(!0)},className:"p-1.5 text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",title:"View Invoice",children:(0,t.jsx)(i.FileText,{className:"w-4 h-4"})})]})})]},e.id))})]})})}),(0,t.jsx)(j,{isOpen:m,initialData:u,onClose:()=>h(!1),onSubmit:S}),(0,t.jsx)(g,{isOpen:f,onClose:()=>N(!1),guestName:k?.guestName,currentRoom:k?.roomNumber,onTransfer:I}),(0,t.jsx)(v,{isOpen:y,onClose:()=>w(!1),record:k})]})}e.s(["default",()=>w],34400)}]);